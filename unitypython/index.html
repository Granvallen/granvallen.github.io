<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>如何用Python开发Unity | Granvallen;Nest</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/normalize.css/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = 'https://hm.baidu.com/hm.js?' + 'bf1ecb4728a04112cb191bc2e62aa815';
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
  })();
</script><script type="text/javascript" src="//cdn.jsdelivr.net/npm/clipboard/dist/clipboard.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.js"></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.css"><meta name="generator" content="Hexo 5.4.2"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">如何用Python开发Unity</h1><a id="logo" href="/.">Granvallen;Nest</a><p class="description">人生苦短</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/guestbook/"><i class="fa fa-comments"> 留言</i></a><a href="/about/"><i class="fa fa-terminal"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-4-4"><div class="content_container"><div class="post"><h1 class="post-title">如何用Python开发Unity</h1><div class="post-meta">May 7, 2023<span> | </span><span class="category"><a href="/categories/Coding/">Coding</a><a href="/categories/Coding/Unity/">Unity</a><a href="/categories/Coding/Unity/Python/">Python</a></span><span class="post-time"><span class="post-meta-item-text"> | </span><span class="post-meta-item-icon"><i class="fa fa-keyboard-o"></i><span class="post-count"> 2,403</span><span class="post-meta-item-text"> 字</span></span></span><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> 阅读</span></span></div><div class="clear"><div class="toc-article" id="toc"><div class="toc-title">文章目录</div><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Python-Scripting%E6%8F%92%E4%BB%B6"><span class="toc-number">1.</span> <span class="toc-text">Python Scripting插件</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Python-NET"><span class="toc-number">2.</span> <span class="toc-text">Python.NET</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Python%E4%B8%8EC-%E4%BA%92%E7%9B%B8%E8%B0%83%E7%94%A8"><span class="toc-number">3.</span> <span class="toc-text">Python与C#互相调用</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BC%80%E5%8F%91%E4%B8%8E%E8%B0%83%E8%AF%95%E7%8E%AF%E5%A2%83"><span class="toc-number">4.</span> <span class="toc-text">开发与调试环境</span></a></li></ol></div></div><div class="post-content"><p>话说, 为什么想不开要用Python开发Unity, 快跑, 全是坑. 也许……你已经在坑里了?</p>
<p>这篇文章粗浅地介绍用Python开发Unity的一种可行的姿势, 以及可能会踩的一些坑.<br><span id="more"></span></p>
<p>背景是最近在尝试用Unity开发独立项目, 说实话, 一开始打算使用Python与Unity的组合确实没有料想到会有这么多问题, 毕竟一边是当前最主流的商业游戏引擎, 而另一边则是当前最主流的编程语言, 官方支持暂且不提, 各种应用一定很丰富吧. 但当我开始检索不得不认清事实, 相关资料少得可怜, 这个技术路线更多被应用于科研, 这倒也并非不可理解.</p>
<p>如前所述, 本文只是粗浅介绍一种用Python开发Unity的姿势, 除自己折腾外实则并不推荐. 显然就商业项目而言, Lua+Unity才是各种成本最小的选择. 简单一提, 因为热更新的需要, 通常把需要频繁更新的逻辑用解释型语言来编码. 除此之外, 在Unity中引入动态语言的好处还有不少, 比如相比原生C#有更高编码效率, 更容易上手, 改写动态语言编码的逻辑也不会触发Unity耗时的重编译. 至于为什么选择用Python更多是个人喜好, Python原生支持面向对象, 基础设施较为完备, 语法优雅, 美中不足是牺牲一些运行效率.</p>
<p>本文并不会涉及如何构建基于Unity的Python框架, 及优化Unity和Python调用性能等高级话题, 或许等到我有了些许心得的时候再聊.</p>
<p>当我们决定用Python来开发Unity时, 我们在想什么? 首先, 这从理论上可行性如何? 因为目前主流已有不少使用Lua开发Unity的方案, 所以应该可行, 需要了解下Python相关的支持如何. 也许可以试试Unity官方Python插件?</p>
<h1 id="Python-Scripting插件"><a href="#Python-Scripting插件" class="headerlink" title="Python Scripting插件"></a>Python Scripting插件</h1><p>没错, 实际上Unity官方确实提供了一个<a target="_blank" rel="noopener" href="https://docs.unity3d.com/Packages/com.unity.scripting.python@7.0/manual/index.html">Python插件</a>, 利用该插件可以在Unity编辑器中执行Python脚本, 具体用法可参考官方文档与插件包内的例程. 安装可以参考这个讨论<a target="_blank" rel="noopener" href="https://forum.unity.com/threads/python-for-unity-install.1112248/">Python for Unity Install - Unity Forum</a>. 截至目前, 这个插件竟然已迭代到了第七版(然而文档依然很简略), 安装插件会自带一个Python解释器. </p>
<p>然而经过简短的使用后发现一些问题, 首先这个Python解释器似乎是与Unity编辑器进程绑定的, 每次进入Play模式依然保留有上次运行的状态, 包括导入的module等, 更关键的是在代码中使用了Python插件相关接口Unity会无法build, 也就是无法利用这个插件开发独立的Unity应用. 也许是我看漏了, 我好像没有注意到官方文档有相关的说明, 直到我看到了这个讨论<a target="_blank" rel="noopener" href="https://forum.unity.com/threads/python-for-unity-editor-only.914843/">Python for Unity Editor Only - Unity Forum</a>.</p>
<p>所以, 如果只是拿Unity和Python做个编辑器应用这个插件还是绰绰有余的, 但想更进一步就得自己动手了. 这个讨论也启示了一种使用Python开发Unity独立应用的方法, 最新的回帖坛友分享了他解决方案的一个例子<a target="_blank" rel="noopener" href="https://forum.unity.com/threads/python-for-unity.1313007/">Showcase - Python for Unity - Unity Forum</a>.</p>
<p>启示, Python Scripting插件底层接口是依赖于一个叫<a target="_blank" rel="noopener" href="http://pythonnet.github.io/">Python.NET</a>的开源项目, 借助这个开源项目能够实现Python与C#的相互调用, 这正是我们所需要的.</p>
<h1 id="Python-NET"><a href="#Python-NET" class="headerlink" title="Python.NET"></a>Python.NET</h1><p>因为Unity本身是基于.Net平台的, 可以把思路转换成Python在.Net环境下开发. 检索了一下, 目前比较主流有两种方案. 其一是前面提到的Python.NET, 另一个是同样开源的<a target="_blank" rel="noopener" href="https://github.com/IronLanguages/ironpython3">IronPython</a>项目. IronPython是C#的Python实现, 有更好的C#支持, 而Python.Net支持的是CPython实现, Python这边的支持更好, 接口调用方式来看差异倒不是很大, 都值得尝试. 这里选择更新稍勤奋的Python.NET进行测试.</p>
<p>为了便于测试, 首先创建一个的Unity目录结构, 只列举必要的文件夹.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Assets/</span><br><span class="line">	|- Plugins/               第三方插件dll</span><br><span class="line">	|	|- PythonRuntime/</span><br><span class="line">	|</span><br><span class="line">	|- PythonScripts/         Python代码</span><br><span class="line">	|	|- main.py</span><br><span class="line">	|</span><br><span class="line">	|- Scripts/               C<span class="comment">#代码</span></span><br><span class="line">	|	|- Manager/</span><br><span class="line">	|	|	|- PythonMgr.cs</span><br><span class="line">	|	|- GameLauncher.cs</span><br><span class="line">	|</span><br><span class="line">	|- SteamingAssets/</span><br><span class="line">	|	|- Python/</span><br><span class="line">	|</span><br><span class="line">	...</span><br></pre></td></tr></table></figure>
<p>然后需要下载一个Python实现及Python.NET项目编译输出的dll, 分别放在Python与PythonRuntime文件夹内.</p>
<p>以Python3.10为例, 从<a target="_blank" rel="noopener" href="https://www.python.org/downloads/windows/">Python Releases for Windows | Python.org</a>下载3.10版本的Windows embeddable package压缩包, 解压后放到Python目录即可, 这个package的python貌似是不带pip, 可能需要手动安装.</p>
<p>至于Python.NET编译的dll需要把项目源码从Github上下载下来, VS打开并编译一下Runtime这个子项目, 拿到Python.Runtime.dll并放入PythonRuntime目录. </p>
<p>Python.NET源码版本的选择这里有个问题, 即前面提到的, Unity编辑器进入Play模式运行Python脚本后, 再退出Play模式, Python运行时不会关闭, 依然会保留之前运行的状态(重新初始化也不会生效), 这自然对开发过程带来很大的不便. 而且可能因为Python侧引用失效, 存在第二次运行Play模式时崩溃的隐患. Python.NET在早前的一个版本中加入了SoftShutdown模式可用来处理上述情况, 但在最近的几次更新中把上述功能移除了(尽管不会再崩溃). 具体细节可参考以下资料</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://github.com/pythonnet/pythonnet/issues/957">Python can’t reliably re-initialize; new proposal for Unity’s domain reload · Issue #957 · pythonnet/pythonnet · GitHub</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/pythonnet/pythonnet/pull/958">Add soft shutdown by amos402 · Pull Request #958 · pythonnet/pythonnet · GitHub</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.google.com/document/d/1a9OLsdKHXJ6MxHjo0WlVRcfjAiaP5hONNKUKKH6Tr-o/edit">Python for NET domain reload - Google 文档</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/pythonnet/pythonnet/pull/1638">Removed `ShutdownMode`. Now always behaves like original `Reload` by lostmsu · Pull Request #1638 · pythonnet/pythonnet · GitHub</a></li>
</ul>
<p>如果为了使用soft shutdown带来的便利, 我们可以暂时使用<a target="_blank" rel="noopener" href="https://github.com/pythonnet/pythonnet/releases/tag/v3.0.0-a2">pythonnet 3.0.0 alpha-2版本</a>来编译.<br>关于Python.NET开发相关资料可参考:</p>
<ul>
<li><a target="_blank" rel="noopener" href="http://pythonnet.github.io/">Python.NET</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/pythonnet/pythonnet/wiki">Home · pythonnet/pythonnet Wiki · GitHub</a></li>
<li><a target="_blank" rel="noopener" href="https://pythonnet.github.io/pythonnet/">Python.NET documentation</a></li>
</ul>
<h1 id="Python与C-互相调用"><a href="#Python与C-互相调用" class="headerlink" title="Python与C#互相调用"></a>Python与C#互相调用</h1><p>总算看到点希望了, 简单说下测试环境. Unity空场景中创建一个Game空物体, 给Game挂上一个GameLauncher.cs作为应用的启动脚本.<br><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// GameLauncher.cs</span></span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">GameLauncher</span> : <span class="title">MonoSingleton</span>&lt;<span class="title">GameLauncher</span>&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Awake</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        PythonMgr.instance.InitEnv();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Start</span>()</span> </span><br><span class="line">    &#123;</span><br><span class="line">        Debug.Log(<span class="string">&quot;[GameLauncher] EinS Start!&quot;</span>);</span><br><span class="line">        PythonMgr.instance.StartGame();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>PythonMgr类用于管理Python运行时, 内容如下</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// PythonMgr.cs</span></span><br><span class="line"><span class="keyword">using</span> UnityEngine;</span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> Python.Runtime;</span><br><span class="line"><span class="keyword">using</span> System.IO;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">PythonMgr</span> : <span class="title">Singleton</span>&lt;<span class="title">PythonMgr</span>&gt;</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> python_code_path;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">InitEnv</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Runtime.PythonDLL = Path.Combine(Application.streamingAssetsPath, <span class="string">&quot;Python\\python310.dll&quot;</span>);</span><br><span class="line">        PythonEngine.Initialize(mode: ShutdownMode.Soft);</span><br><span class="line">        Debug.Log(<span class="string">&quot;[PythonMgr] python interpreter version: &quot;</span> + PythonEngine.Version);</span><br><span class="line"></span><br><span class="line">        python_code_path = Path.Combine(Application.dataPath, <span class="string">&quot;PythonScripts/&quot;</span>);</span><br><span class="line">        Debug.Log(<span class="string">&quot;[PythonMgr] python_path: &quot;</span> + python_code_path);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">StartGame</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Debug.Log(<span class="string">&quot;[PythonMgr] StartGame&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">using</span> (Py.GIL())</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">dynamic</span> sys = Py.Import(<span class="string">&quot;sys&quot;</span>);</span><br><span class="line">            sys.path.append(python_code_path);</span><br><span class="line"></span><br><span class="line">            <span class="built_in">dynamic</span> main = Py.Import(<span class="string">&quot;main&quot;</span>);</span><br><span class="line">            <span class="built_in">dynamic</span> res = main.StartGame();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        PythonEngine.Shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>为了通过Python.NET调用Python运行时需要用到Python.Runtime命名空间. 根据Python.Net的文档, 初始化PythonEngine前需要设置Runtime.PythonDLL到对应Python版本dll的路径, 或者设置PYTHONNET_PYDLL环境变量. 接着使用ShutdownMode.Soft进行初始化. StartGame中运行Python代码前需使用using(Py.GIL())获取到Python的GIL锁. 然后就可以使用Py.Import导入模块, 并调用模块方法了. 这里我们把PythonScripts路径加入sys.path, 然后加载Python脚本启动模块main, 并调用其StartGame方法.</p>
<p>注意要让untiy支持dynamic关键字, 需要在Unity project settings/player 中把api compatibility level 调整为 .Net Framework.</p>
<p>来到Python一侧, main.py内容如下<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># main.py</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></span><br><span class="line"><span class="keyword">from</span> clr <span class="keyword">import</span> GameLauncher</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> UnityEngine <span class="keyword">as</span> ue</span><br><span class="line"><span class="keyword">from</span> System.IO <span class="keyword">import</span> Path</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">StartGame</span>():</span><br><span class="line">    ue.Debug.Log(Path.Combine(ue.Application.dataPath, <span class="string">&quot;PythonScripts/main.py&quot;</span>))</span><br><span class="line">    </span><br><span class="line">    game = ue.GameObject.Find(<span class="string">&quot;Game&quot;</span>)</span><br><span class="line">    gameluncher = game.GetComponent(GameLauncher)</span><br><span class="line">	ue.Debug.Log(gameluncher.name)</span><br></pre></td></tr></table></figure></p>
<p>通过clr模块, 我们可以把自定义的类类型导入进来使用, 如果这些自定义类是在命名空间中, 则需要先导入命名空间. </p>
<p>关于这个话题的一些参考:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://forum.unity.com/threads/python-for-unity-doesnt-support-custom-class.969111/">Python for Unity doesn’t support Custom class - Unity Forum</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/pythonnet/pythonnet/wiki/How-to-call-a-dynamic-library">How to call a dynamic library · pythonnet/pythonnet Wiki · GitHub</a></li>
</ul>
<h1 id="开发与调试环境"><a href="#开发与调试环境" class="headerlink" title="开发与调试环境"></a>开发与调试环境</h1><p>最后再简单聊一下另一个比较关键的问题, 开发与调试环境. 本来可以期待着可以All In One, 使用VS code作为开发环境, 但是Unity官方最近放弃了继续支持VS Code的插件, 具体见<a target="_blank" rel="noopener" href="https://forum.unity.com/threads/update-on-the-visual-studio-code-package.1302621/">Official - Update on the Visual Studio Code package - Unity Forum</a>. 所以对于C#的调试还是使用Visual Studio吧. 至于Python依然可以使用VS Code + Python插件来调试.</p>
<p>使用VS调试Unity的C#代码不用说是容易的, 而使用VS Code调试Python可以参考Python.NET的建议, 参考<a target="_blank" rel="noopener" href="https://github.com/pythonnet/pythonnet/wiki/Various-debugging-scenarios-of-embedded-CPython">Various debugging scenarios of embedded CPython · pythonnet/pythonnet Wiki · GitHub</a>, 我们可以使用最简单的第三种远程调试方式, 其中<a target="_blank" rel="noopener" href="https://github.com/microsoft/ptvsd">ptvsd</a>已被微软所废弃, 作为替代可以使用<a target="_blank" rel="noopener" href="https://github.com/microsoft/debugpy/">debugpy</a>库. 原理就是VS Code开启一个调试服务, 执行的Python脚本使用debugpy.connect进行连接调试.</p>
<p>VS Code新建一个Python调试配置, 内容如下<br><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// launch.json</span></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.2.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;configurations&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Python debug&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;python&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;request&quot;</span><span class="punctuation">:</span> <span class="string">&quot;attach&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;justMyCode&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;listen&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;host&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0.0.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;port&quot;</span><span class="punctuation">:</span> <span class="number">5678</span><span class="punctuation">,</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;pathMappings&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;localRoot&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;workspaceFolder&#125;&quot;</span><span class="punctuation">,</span></span><br><span class="line">                    <span class="attr">&quot;remoteRoot&quot;</span><span class="punctuation">:</span> <span class="string">&quot;$&#123;workspaceFolder&#125;&quot;</span></span><br><span class="line">                <span class="punctuation">&#125;</span></span><br><span class="line">            <span class="punctuation">]</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure></p>
<p>然后在main.py中增加<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> debugpy</span><br><span class="line">debugpy.connect((<span class="string">&quot;localhost&quot;</span>, <span class="number">5678</span>))</span><br></pre></td></tr></table></figure></p>
<p>完成后VS Code先开启调试, Unity进入Play模式运行python脚本即可, 与调试普通Python脚本相同.<br>Enjoy.<br>.</p>
<p>.</p>
<p>.</p>
<p>.</p>
<p>.</p>
<p>.</p>
<p>終わり</p>
</div><div class="tags"><a href="/tags/Unity/"><i class="fa fa-tag"></i>Unity</a><a href="/tags/Python/"><i class="fa fa-tag"></i>Python</a><a href="/tags/C/"><i class="fa fa-tag"></i>C#</a></div><div class="post-nav"><a class="next" href="/persona5/">聊聊我对P5R的感受与观察</a></div><div id="tcomment"></div><script src="https://cdn.staticfile.org/twikoo/1.6.10/twikoo.all.min.js"></script><script>twikoo.init({
  envId: 'https://granvallen.zeabur.app',
  el: '#tcomment',
  region: '',
  path: ''
})</script></div></div></div><div class="pure-u-1 pure-u-md-4-4"><div id="footer">Copyright © 2023 <a href="/." rel="nofollow">Granvallen.</a> <br /> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a> Theme by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=1.0.0" async></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=1.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox/dist/jquery.fancybox.min.css"><link rel="stylesheet" type="text/css" href="/css/search.css?v=1.0.0"><script type="text/javascript" src="/js/search.js?v=1.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
   search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" src="/js/copycode.js" successtext="复制成功!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css"><script type="text/x-mathjax-config">MathJax.Hub.Config({
  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
  });
</script><script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML" async></script><script type="text/javascript" src="/js/codeblock-resizer.js?v=1.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=1.0.0"></script></div></body></html>